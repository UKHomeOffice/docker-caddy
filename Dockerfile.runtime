FROM alpine:latest

ENV OPENSSL_VERSION 1.0.2d-r0

RUN apk upgrade --update --available && \
    apk add \
      ca-certificates \
      "openssl>=${OPENSSL_VERSION}" \
    && rm -f /var/cache/apk/*

VOLUME ["/etc/caddy"]

COPY caddy /usr/sbin/caddy

ENTRYPOINT ["/usr/sbin/caddy"]
